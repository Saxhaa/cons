<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Poème du Jour - The Agence</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Lato">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <h1>Conservatoire</h1>
        <nav>
            <ul class="navigationLinks">
                <li class="liste1"><a href="index.html">Accueil</a></li>
                <li class="liste1"><a href="prediction.html">Prédictions divinatoires</a></li>
                <li class="liste1"><a href="poeme-du-jour.html">Poétesse du jour</a></li>
                <li class="liste1"><a href="horoscope.html">Horoscope</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="poem-section">
            <h2>Poétesse du jour</h2>
            <p>Chaque jour, sélection aléatoire de poèmes écrits par une femme. <br>La boss lady du jour</p>
            <div class="poem-container" id="poemContainer">
                <h3 class="poem-title">L'Aube spirituelle</h3>
                <p class="poem-author">— Marie Noël</p>
                <div class="poem-text">
                    <p>
                    Quand l'aube se lève, un chant monte en moi,<br>
                    Un chant de lumière et d'espérance,<br>
                    Comme un appel doux vers la confiance,<br>
                    Comme un souffle pur qui vient à toi.<br><br>

                    Les ombres s'effacent, le jour renaît,<br>
                    Et dans ce silence où tout se tait,<br>
                    Mon âme écoute et se prépare<br>
                    À recevoir l'amour qui se déclare.
                    </p>
                </div>
                <a href="#" class="wikisource-link">Lire sur Wikisource</a>
            </div>
        </section>
    </main>

    <footer>
        <div>
            <span style="padding-left:15%">&copy; Copyright 2025. By Sachouille Fripouille</span>
        </div>
    </footer>

    <script>
        // Liste d'autrices francophones
        const autrices = [
            { name: "Marie de France", wikisource: "Marie_de_France" },
            { name: "Christine de Pizan", wikisource: "Christine_de_Pizan" },
            { name: "Louise Labé", wikisource: "Louise_Labé" },
            { name: "Marguerite de Navarre", wikisource: "Marguerite_de_Navarre" },
            { name: "Marie Le Jars de Gournay", wikisource: "Marie_Le_Jars_de_Gournay" },
            { name: "Marceline Desbordes-Valmore", wikisource: "Marceline_Desbordes-Valmore" },
            { name: "Anna de Noailles", wikisource: "Anna_de_Noailles" },
            { name: "Renée Vivien", wikisource: "Renée_Vivien" },
            { name: "Marie Noël", wikisource: "Marie_Noël" },
            { name: "Andrée Chedid", wikisource: "Andrée_Chedid" }
        ];

        // Fonction pour afficher un poème écrit par une femme
        async function afficherPoemeDuJour() {
            const container = document.getElementById("poemContainer");
            container.innerHTML = '<p class="loading">Recherche d\'un poème écrit par une femme...</p>';

            try {
                // Sélection aléatoire d'une autrice
                const autriceIndex = Math.floor(Math.random() * autrices.length);
                const autrice = autrices[autriceIndex];

                // Rechercher une page de poésie de cette autrice sur Wikisource
                const response = await fetch(
                    `https://fr.wikisource.org/w/api.php?action=query&format=json&origin=*&list=search&srsearch=intitle:poème+insource:${autrice.wikisource}&srnamespace=0&srlimit=10`
                );

                const data = await response.json();

                if (data.query && data.query.search && data.query.search.length > 0) {
                    // Sélectionner une page aléatoire parmi les résultats
                    const randomIndex = Math.floor(Math.random() * data.query.search.length);
                    const page = data.query.search[randomIndex];

                    // Afficher le poème avec un lien vers Wikisource
                    container.innerHTML = `
                        <h3 class="poem-title">${page.title}</h3>
                        <p class="poem-author">— ${autrice.name}</p>
                        <div class="poem-text">
                            <p>Poème sélectionné parmi les œuvres de ${autrice.name}.</p>
                        </div>
                        <a href="https://fr.wikisource.org/wiki/${encodeURIComponent(page.title.replace(/ /g, "_"))}" target="_blank" class="wikisource-link">Lire sur Wikisource</a>
                    `;
                } else {
                    container.innerHTML = `
                        <h3 class="poem-title">Poème introuvable</h3>
                        <p class="poem-author">— ${autrice.name}</p>
                        <div class="poem-text">
                            <p>Aucun poème trouvé pour cette autrice aujourd'hui.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error("Erreur lors de la recherche du poème :", error);
                container.innerHTML = `
                    <h3 class="poem-title">Erreur de chargement</h3>
                    <div class="poem-text">
                        <p>Impossible de charger le poème. Veuillez réessayer plus tard.</p>
                    </div>
                `;
            }
        }

        // Afficher le poème du jour au chargement de la page
        window.onload = afficherPoemeDuJour;
    </script>
</body>
</html>
